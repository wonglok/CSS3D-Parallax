!function(){"use strict";function t(){var t={fac:{},inst:{},val:function(n,e){t.inst[n]=e},set:function(n,e){t.inst[n]=null,t.fac[n]=e},get:function(n){return t.inst[n]||(t.inst[n]=t.make(n))},make:function(n){var e=t.fac[n];if(e)return console.log("coreMake: "+n),e();throw new Error("Factory Not Found!! "+n)}};return t}window.core=new t,console.log(window.core)}(),function(t,n,e){"use strict";t.val("val.sys",{winHeight:0,winWidth:0,clientX:0,clientY:0,centerX:0,centerY:0,scrollY:0,currentPageIndex:0,sections:[],slideSectionClass:".slide-section",orientX:0,orientY:0}),t.val("val.lastSys",{clientX:0}),t.val("fn.extend",function(t,n){for(var e in n)n.hasOwnProperty(e)&&(t[e]=n[e]);return t}),t.set("mod.loop",function(){function n(){d.scrollY===l.scrollY&&c.stop(),u(d,l)}function e(){r=window.requestAnimationFrame(e),void 0!==s.render&&"function"==typeof s.render&&(n(),s.render())}function i(){a=!1,window.cancelAnimationFrame(r)}function o(){a||(a=!0,e())}var r,c={},s=t.get("mod.renderer"),a=!1,u=t.get("fn.extend"),l=t.get("val.sys"),d=t.get("val.lastSys");return c.stop=i,c.start=o,c}),t.set("mod.renderer",function(){function i(t){return v.sections[t].offset}function o(t){return v.sections[t].height}function r(t){var n=Math.abs(v.winHeight-o(t))/2,e=v.scrollY-i(t)+n;return e}function c(t,e,i,o){n(t.el).css("transform","translate3d("+e+"px,"+i+"px,"+o+"px)")}function s(t,e,i){n(t.el).css("transform","rotateY("+e+"deg) rotateX("+i*-.3+"deg)")}function a(t,n){t.items.forEach(function(e){var i=v.centerX/-10*e.factor/3,o=(r(n)/4+v.centerY/-10)*e.factor/10,a=0;"true"===t.threeD?s(e,i,o,a):c(e,i,o,a)})}function u(t,n){t.items.forEach(function(e){var i=v.orientX,o=v.orientY+r(n)/4*e.factor/10,a=0;"true"===t.threeD?s(e,i,o,a):c(e,i,o,a)})}function l(t,n){e.touch?u(t,n):a(t,n)}function d(t,n){(v.currentPageIndex===n||v.currentPageIndex===n+1||v.currentPageIndex===n-1)&&l(t,n)}function f(){v.sections.forEach(d)}var h={},v=t.get("val.sys");return h.render=f,h}),t.val("fn.throttle",function(t,n){var e=!0;return function(i){e&&(e=!1,setTimeout(function(){e=!0},n),t(i))}}),t.set("mod.parallax",function(){function i(){d.sections=[],n(d.slideSectionClass).each(function(){var t=[];n(this).find(".so").each(function(){t.push({el:n(this)[0],factor:n(this).attr("factor")})}),d.sections.push({isSlide:!0,threeD:n(this).attr("threeD"),height:n(this).height(),offset:n(this).offset().top,items:t})})}function o(){d.centerX=d.winWidth/2-d.clientX,d.centerY=d.winHeight/2-d.clientY}function r(){var t=d.sections;d.currentPageIndex=0;for(var n=t.length-1;n>=0;n--)if(d.scrollY>=t[n].offset){d.currentPageIndex=n;break}}function c(){d.winHeight=document.documentElement.clientHeight,d.winWidth=document.documentElement.clientWidth,o(),i(),l.start()}function s(t){d.clientX=t.clientX,d.clientY=t.clientY,o(),l.start()}function a(){d.scrollY=window.scrollY,r(),l.start()}var u={},l=t.get("mod.loop"),d=t.get("val.sys"),f=t.get("mod.mobileScroll"),h=t.get("mod.deviceOrient");return u.init=function(){c(),window.addEventListener("orientationchange",c),window.addEventListener("resize",c),window.addEventListener("scroll",a),e.touch?(f.init(),h.init()):window.addEventListener("mousemove",s)},u}),t.set("mod.mobileScroll",function(){function n(t){o=t.touches[0].clientX,r=t.touches[0].clientY}function e(t){t.preventDefault();var n=t.touches[0].clientX,e=t.touches[0].clientY,i=o-n,c=r-e,a=i+window.scrollX,u=c+window.scrollY;window.scrollTo(a,u),s.scrollX=a,s.scrollY=u,o=n,r=e}function i(){document.addEventListener("touchstart",n),document.addEventListener("touchmove",e)}var o,r,c={},s=t.get("val.sys");return c.init=i,c}),t.set("mod.deviceOrient",function(){function n(t){var n=t.beta,e=t.gamma;o.orientX=e,o.orientY=n-45,r.start()}function e(){var t=/iPad|iPhone|iPod/.test(navigator.platform);t&&window.addEventListener("deviceorientation",n)}var i={},o=t.get("val.sys"),r=t.get("mod.loop");return i.init=e,i})}(window.core,window.$,window.Modernizr),function(t){"use strict";t.set("mod.main",function(){var n={},e=t.get("mod.parallax");return n.init=function(){console.log("main init"),e.init()},n}),t.get("mod.main").init()}(window.core);